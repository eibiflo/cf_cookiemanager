<html
        xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
        xmlns:be="http://typo3.org/ns/TYPO3/CMS/Backend/ViewHelpers"
        data-namespace-typo3-fluid="true">

<f:layout name="Module"/>

<f:section name="Content">

    <div class="loadingcontainer">
        <div class="spinner-border" role="status">
            <span class="sr-only"></span>
        </div>
        <hr>
        <div class="text">Loading Cookiemanager...</div>
    </div>

    <div class="module-body t3js-module-body cf_manager" style="display: none;">
        <f:if condition="{noselection}">
            <div class="alert alert-info">
                <div class="media">
                    <div class="media-left"><span class="fa-stack fa-lg">        <i
                            class="fa fa-circle fa-stack-2x"></i>        <i
                            class="fa fa-info fa-stack-1x"></i>      </span>
                    </div>
                    <div class="media-body"><p class="alert-message"><strong>Select a Root-Page to view Cookie
                        configuration</strong><br>
                    </p>
                    </div>
                </div>
            </div>
        </f:if>
        <f:if condition="{firstInstall}">
            <f:then>
                <h2>Welcome to CodingFreaks Cookie Manager</h2>
                <hr>
                <f:flashMessages></f:flashMessages>
                <div class="cf-cookiemanager-alert">

                    <div id="cf-standardDatasetInstall">


                        <div id="cf-welcome-screen">
                            <h3><strong>Welcome to Coding-Freaks Cookie Manager ðŸš€</strong></h3>
                            <p>
                                Let's get started and set up your cookie management in just a few steps!
                            </p>
                            <p>
                                For more information, please refer to the following link: <strong> <a target="_blank"
                                                                                                      href="https://docs.typo3.org/p/codingfreaks/cf-cookiemanager/main/en-us/Installation/Index.html#autoimport-datasets-for-languages">Autoimport
                                Datasets -></a></strong>
                            </p>

                            <div id="loading-spinner" style="display:none;">
                                Loading...
                                <typo3-backend-spinner size="small"></typo3-backend-spinner>
                            </div>
                            <button class="btn btn-success startConfiguration"
                                    data-cf-endpoint="{typoScriptConfig.end_point}" data-cf-storage="{storageUID}">Start
                                Configuration
                            </button>

                        </div>


                        <div class="cf-onboarding-container" id="cf-onboarding-container" style="display:none;">


                            <div class="cf-onboarding-progress">
                                <div class="cf-step active" data-step="1">1. Feedback-Configuration</div>
                                <div class="cf-step" data-step="2">2. API Usage (Optional)</div>
                                <div class="cf-step" data-step="3">3. Finishing</div>
                            </div>

                            <div class="cf-onboarding-content">
                                <!-- Schritt 1: Basis-Einrichtung -->
                                <div class="cf-step-content active" data-step="1">
                                    <h2>Thanks for using Coding-Freaks Cookie-Manager</h2>
                                    <hr>
                                    <div class="form-group">
                                        <p>
                                            We continuously strive to make our cookie manager better.<br>
                                            To do this, we kindly ask for your permission to collect usage data during
                                            installation and while using the extension in the Backend.<br>
                                        </p>

                                        <p>
                                        <ul>
                                            <li> What we collect: Insights on how the extension is used in the Backend
                                                (Only this Extension Module).
                                            </li>
                                            <li> How we collect: We use a Thirdparty-Service called <a target="_blank"
                                                                                                       href="https://clarity.microsoft.com/">MS-Clarity</a>
                                                hosted in the USA by Mircosoft.
                                            </li>
                                            <li> Why we collect it: To improve performance, user experience, and develop
                                                new features or find usage bugs.
                                            </li>
                                            <li> Your privacy matters: These data are used exclusively to improve the
                                                extension helping us understand Users.
                                            </li>
                                        </ul>

                                        Would you like to help us improve by sharing your usage data?<br>
                                        </p>
                                        <div class="cf-consent-options">
                                            <div class="cf-consent-option">
                                                <input type="radio" id="consentOptIn" name="consentType" value="opt-in">
                                                <label for="consentOptIn">
                                                    <span class="cf-icon"><i class="fas fa-check-circle"></i></span>
                                                    <span>Opt-In (Thanks for helping us improve!)</span>
                                                </label>
                                            </div>
                                            <div class="cf-consent-option">
                                                <input type="radio" id="consentOptOut" name="consentType"
                                                       value="opt-out">
                                                <label for="consentOptOut">
                                                    <span class="cf-icon"><i class="fas fa-times-circle"></i></span>
                                                    <span>Opt-Out (No, Thanks)</span>
                                                </label>
                                            </div>
                                        </div>

                                        <a target="_blank" href="https://clarity.microsoft.com/terms">By Opt-In you
                                            confirm the Global-Terms of Ms-Clarity</a>


                                    </div>

                                </div>

                                <!-- Schritt 2: API Key -->
                                <div class="cf-step-content" data-step="2">
                                    <h2>API Configuration (Optional)</h2>
                                    <hr>
                                    <p>
                                        To optimally utilize our API services and prevent spam, these features will soon be exclusively available to API users.<br>
                                        Sign up now for a free Open-Beta account on <a target="_blank" href="https://coding-freaks.com/register">Coding-Freaks</a> to get the most out of the Cookiemanager Extension!
                                    </p>

                                    <div class="cf-feature-table">
                                        <table>
                                            <thead>
                                            <tr>
                                                <th>Feature</th>
                                                <th class="text-center">API Key</th>
                                                <th class="text-center">No API Key</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td>
                                                    Cookie-Database Presets
                                                    <span class="feature-description">Predefined cookie configurations for common services.</span>
                                                </td>
                                                <td class="text-center">
                                                    <core:icon identifier="actions-check-badge-alt" size="small"/>
                                                </td>
                                                <td class="text-center">
                                                    <core:icon identifier="actions-check-badge-alt" size="small"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    Cookie-Database Updates
                                                    <span class="feature-description">Update and merge interface for local datasets and cookie database changes.</span>
                                                </td>
                                                <td class="text-center">
                                                    <core:icon identifier="actions-check-badge-alt" size="small"/>
                                                </td>
                                                <td class="text-center">
                                                    <core:icon identifier="actions-check-badge-alt" size="small"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    Cookie-Scanner
                                                    <span class="feature-description">Scans your website for cookies and provides configuration suggestions. (Max.10 Pages without API-Key)</span>
                                                </td>
                                                <td class="text-center">
                                                    <core:icon identifier="actions-check-badge-alt" size="small"/>
                                                </td>
                                                <td class="text-center">
                                                    <core:icon identifier="actions-check-badge-alt" size="small"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    Thumbnail API
                                                    <span class="feature-description">Generates thumbnails for iframe previews.</span>
                                                </td>
                                                <td class="text-center">
                                                    <core:icon identifier="actions-check-badge-alt" size="small"/>
                                                </td>
                                                <td class="text-center">
                                                    <core:icon identifier="actions-close" size="small"/>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>




                                    <div class="form-group">
                                        <label for="apiKey">API Key (optional)</label>
                                        <input type="text" id="apiKey" class="form-control" placeholder="API Key">
                                    </div>

                                    <div class="form-group">
                                        <label for="apiKey">API Secret (optional)</label>
                                        <input type="text" id="apiSecret" class="form-control" placeholder="API Secret">
                                    </div>

                                    <input type="hidden" id="endPointUrl" value="{typoScriptConfig.end_point}">
                                    <input type="hidden" id="currentStorage" value="{storageUID}">

                                    <div class="cf-api-info">
                                        <p>No API Key? <a href="https://coding-freaks.com/register" target="_blank">Register
                                            for a free beta Account to get all API-Features</a></p>
                                        <p>You can Skip this for now, and add the full API-Integration later.</p>
                                    </div>
                                </div>

                                <!-- Schritt 3: Fertigstellung -->
                                <div class="cf-step-content" data-step="3">
                                    <h2>Done quickly! ðŸŽ‰</h2>
                                    <hr>
                                    <p>Your Cookie Manager is ready to use, we have some Tutorials to help you geting Started:</p>


                                    <div class="cf-tutorial-teaser">
                                        <h3>Explore Our Tutorials</h3>
                                        <p>Learn how to get the most out of the Cookie Manager with our step-by-step guides.</p>
                                        <div class="cf-tutorial-list">
                                            <div class="cf-tutorial-item">
                                                <a href="https://coding-freaks.com/tutorials/docs/cookie-docs/scanning-cookies/" target="_blank">
                                                    <span class="cf-tutorial-title">Using the Cookie Scanner</span>
                                                    <span class="cf-tutorial-description">Discover how to scan your website for cookies and configure them
                        easily.</span>
                                                </a>
                                            </div>
                                            <div class="cf-tutorial-item">
                                                <a href="https://coding-freaks.com/tutorials/docs/cookie-docs/cookieworkflow/" target="_blank">
                                                    <span class="cf-tutorial-title">Implement a Cookie Workflow</span>
                                                    <span class="cf-tutorial-description">Learn how to create a seamless cookie consent workflow for your
                        users.</span>
                                                </a>
                                            </div>
                                        </div>
                                        <p class="cf-final-notice">Please help us improve the Guides, and share your Feedback and Problems with us.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="cf-onboarding-actions">
                                <button class="btn btn-default cf-prev-btn" style="display: none;">Back</button>
                                <button class="btn btn-primary cf-next-btn">Next</button>
                                <button class="btn btn-success cf-install-btn" style="display: none;"
                                        data-cf-endpoint="${cfEndPoint}" data-cf-storage="${currentStorage}">Install Presets
                                </button>
                            </div>


                        </div>

                    </div>


                    <div id="cf-offlineDatasetInstall" style="display: none">
                        <!-- Custom import needed -->
                        <p>You can import the data manually. Keep in mind, in this case you can not use the codingfreaks
                            API Features in this Extension.</p>
                        <a class="btn btn-primary" target="_blank" href="https://coding-freaks.com/cookie-database">Download
                            Preset</a>
                        <hr>
                        <!-- Add form for zip upload -->

                        <input type="file" id="datasetFile" name="fileToUpload[]" data-cf-storage="{storageUID}">
                        <div id="loading-spinner-offline" style="display:none;">
                            Loading...
                            <typo3-backend-spinner size="small"></typo3-backend-spinner>
                        </div>
                        <button class="btn btn-success startConfigurationOffline" data-cf-storage="{storageUID}">Start
                            Configuration
                        </button>


                    </div>


                </div>


            </f:then>
            <f:else>
                <div class="typo3-TCEforms">
                    <div role="tabpanel">
                        <ul class="nav nav-tabs t3js-tabs" role="tablist"
                            data-store-last-tab="1">
                            <f:for each="{tabs}" as="tab" iteration="iteration">
                                <li role="presentation" class="t3js-tabmenu-item nav-item">
                                    <a href="#DTM-{tab.identifier}-1"
                                       class="nav-link   {f:if(condition:'{iteration.isFirst}', then:'active')}"
                                       title=""
                                       aria-controls="DTM-{tab.identifier}-1" role="tab" data-bs-toggle="tab">
                                        {tab.title}
                                    </a>
                                </li>
                            </f:for>
                        </ul>
                        <div class="tab-content">
                            <f:for each="{tabs}" as="tab" iteration="iteration">
                                <div role="tabpanel"
                                     class="tab-pane  {f:if(condition:'{iteration.isFirst}', then:'active')}"
                                     id="DTM-{tab.identifier}-1">
                                    <div class="panel panel-tab">
                                        <div class="panel-body">
                                            <f:render partial="backendTabs/{tab.identifier}"
                                                      arguments="{_all}"></f:render>
                                        </div>
                                    </div>
                                </div>
                            </f:for>
                        </div>
                    </div>
                </div>
                <div class="cf-footer">
                    <div>
                        powered by <a href="https://coding-freaks.com" target="_blank">CodingFreaks</a> | <a
                            target="_blank"
                            href="https://typo3.slack.com/archives/C04NB2ZP30U"><strong>Questions?</strong> Join the
                        Typo3 Slack Channel #ext-cfcookiemanager</a> | <a
                            href="https://docs.typo3.org/p/codingfreaks/cf-cookiemanager/main/en-us/Sitemap.html"
                            target="_blank">CookieManager Documentation</a> | <a
                            href="https://docs.typo3.org/p/codingfreaks/cf-cookiemanager/main/en-us/ChangeLog/Index.html"
                            target="_blank">Changelog</a>
                    </div>
                    <div>
                        <a href="https://coding-freaks.com/cookie-scanner" target="_blank">CodingFreaks GDPR Scanner &
                            CookieAPI</a>
                    </div>
                </div>
            </f:else>
        </f:if>
    </div>
</f:section>
</html>
