imports:
  - { resource: Backend/DashboardWidgets.yaml }
services:
  # general settings
  _defaults:
    autowire: true
    autoconfigure: true
    public: false

  CodingFreaks\CfCookiemanager\:
    resource: '../Classes/*'
    exclude:
      - '../Classes/Domain/Model/*'

  # Frontend Services (Phase 2 refactoring)
  CodingFreaks\CfCookiemanager\Service\Config\ConfigurationBuilderService:
    public: false

  CodingFreaks\CfCookiemanager\Service\Frontend\ConsentConfigurationService:
    public: false

  CodingFreaks\CfCookiemanager\Service\Frontend\IframeManagerService:
    public: false

  CodingFreaks\CfCookiemanager\Service\Frontend\ExternalScriptService:
    public: false

  CodingFreaks\CfCookiemanager\Service\Frontend\TrackingService:
    public: false

  CodingFreaks\CfCookiemanager\Service\Resolver\ContextResolverService:
    public: false

  CodingFreaks\CfCookiemanager\Service\VariableReplacerService:
    public: false

  CodingFreaks\CfCookiemanager\Service\Sync\ApiClientService:
    public: false

  # Interface alias for ApiClientService (enables testability via mocking)
  CodingFreaks\CfCookiemanager\Service\Sync\ApiClientInterface:
    alias: CodingFreaks\CfCookiemanager\Service\Sync\ApiClientService

  # Phase 3 Services (Backend & Cleanup)
  CodingFreaks\CfCookiemanager\Service\FieldMappingService:
    public: false

  CodingFreaks\CfCookiemanager\Service\TransformationService:
    public: false

  CodingFreaks\CfCookiemanager\Service\Config\ConfigurationTreeService:
    public: false

  # Phase 4 Services (Scan)
  CodingFreaks\CfCookiemanager\Service\Scan\ScanService:
    public: false

  # dependency injection (override public setting)
  CodingFreaks\CfCookiemanager\Controller\CookieSettingsBackendController:
    public: true
    tags: [ 'backend.controller' ]

  CodingFreaks\CfCookiemanager\Service\AutoconfigurationService:
    public: true

  CodingFreaks\CfCookiemanager\Service\ThumbnailService:
    public: true

  CodingFreaks\CfCookiemanager\Utility\RenderUtility:
    autowire: true
    public: true
    arguments:
      $eventDispatcher: '@Psr\EventDispatcher\EventDispatcherInterface'

  CodingFreaks\CfCookiemanager\EventListener\AddIntroJsModule:
    tags:
      - name: event.listener
        event: TYPO3\CMS\Backend\Controller\Event\BeforeFormEnginePageInitializedEvent

  CodingFreaks\CfCookiemanager\Controller\BackendAjax\UpdateCheckController:
    public: true
    arguments:
      $responseFactory: '@Psr\Http\Message\ResponseFactoryInterface'

  CodingFreaks\CfCookiemanager\Controller\BackendAjax\InstallController:
    public: true

  CodingFreaks\CfCookiemanager\Hooks\DataHandlerHook:
    public: true

  CodingFreaks\CfCookiemanager\Controller\BackendAjax\ThumbnailController:
    public: true

  CodingFreaks\CfCookiemanager\Updates\FrontendIdentifierUpdateWizard:
    class: CodingFreaks\CfCookiemanager\Updates\FrontendIdentifierUpdateWizard
    autowire: true
    public: true
    tags:
      - name: typo3.install.updatewizard

  CodingFreaks\CfCookiemanager\Updates\PluginListToCTypeUpdateWizard:
    class: CodingFreaks\CfCookiemanager\Updates\PluginListToCTypeUpdateWizard
    autowire: true
    public: true
    tags:
      - name: typo3.install.updatewizard